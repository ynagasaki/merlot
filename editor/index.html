<html>
<head>
	<title>merlot editor</title>
	
	<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
	<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css" />
	<link rel="stylesheet" type="text/css" href="meditr.css" />

	<script src="http://yui.yahooapis.com/3.14.1/build/yui/yui-min.js"></script>
	<script type="text/javascript" src="processing-1.4.1.js"></script>
	<script type="text/javascript" src="mutil.js"></script>
	<script type="text/javascript" src="meditr.js"></script>
</head>
<body>

<div id="sidebar">
	<h1><span style="color:#1f8dd6;">m</span>editr</h1>
	<div id="file_buttons_container">
		<div id="select_file_container"></div>
		<div id="save_file_container">
			<button class="pure-button pure-button-disabled" id="save_button"><i class="fa fa-floppy-o"></i></button>
		</div>
	</div>
</div>

<div id="content">
	<canvas id="glibcanvas"></canvas>
	<script type="text/javascript">Meditr.init('glibcanvas');Meditr.play();</script>
</div>

<!-- file uploader script -->
<script type="text/javascript">
YUI({filter:"raw"}).use("uploader", "json-parse", "io-base", function(Y) {
	if(Y.Uploader.TYPE != "html5") {
		alert("html5 only, foo");
	} else if (Y.Uploader.TYPE != "none" && !Y.UA.ios) {
		var uploader = new Y.Uploader({
			width: "80px",
			height: "32px",
			multipleFiles: false,
			swfURL: null,
			uploadURL: Meditr.APP_PATH,
			withCredentials: false,
			selectButtonLabel: "open"
		});

		uploader.render("#select_file_container");

		uploader.after("fileselect", function (event) {
			var fileList = event.fileList;
			var fileInstance = fileList[0];
			var uri = Meditr.ASSETS_LVLS + fileInstance.get("name");

			// Define a function to handle the response data.
			function complete(id, o, args) {
				var data = Y.JSON.parse(o.responseText);
				Meditr.load(data);
			};

			Y.on('io:complete', complete, Y, null);

			var request = Y.io(uri + "?r=" + Math.random());
		});

		uploader.on("uploadstart", function (event) {
			uploader.set("enabled", false);
		});

		uploader.on("alluploadscomplete", function (event) {
			uploader.set("enabled", true);
			uploader.set("fileList", []);
		});
	}
});
</script>

</body>
</html>